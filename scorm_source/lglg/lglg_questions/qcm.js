var proto_qcm={donnees:{},affich:function(a){var d=document.getElementById("ctnQuestion_"+a),c=document.createElement("p");if(0<this.donnees.extraitQuestion.fin){var b=document.createElement("span");b.id="btnVidExtrait_q_"+a+"_vo";b.className=" btnExtraitVidVo";b.onclick=lireExtraitVid;c.appendChild(b)}b=document.createElement("span");b.className="txtQuestion";b.innerHTML=this.donnees.txtQuestion;c.appendChild(b);d.appendChild(c);for(c=0;c<this.donnees.propositions.length;c++){var b=document.createElement("div"),
e=document.createElement("label"),f=document.createElement("input");document.createElement("span");b.className="QCMprop";b.onclick=QCMClckHdlr;b.id="prop_"+a+"_"+c;f.id="cb_"+a+"_"+c;"1"===tblReponses[pCourante].reps[a].substr(c,1)&&(f.checked=!0);f.type="checkbox";b.appendChild(f);e.id="txt_"+a+"_"+c;e.innerHTML=this.donnees.propositions[c].texte;e.htmlFor="cb_"+a+"_"+c;b.appendChild(e);e=document.createElement("div");e.id="score_"+a+"_"+c;e.className="feedback score";e.style="display:none";e.innerHTML=
"";b.appendChild(e);d.appendChild(b)}c=document.createElement("div");c.className="feedback txtCorrection";c.innerHTML=this.donnees.txtCorrection;d.appendChild(c);c=document.createElement("div");c.className="ctnFlexH";0<this.donnees.extraitCorrection.fin&&(b=document.createElement("div"),b.id="btnVidExtrait_c_"+a+"_vo",b.className="feedback btnExtraitVidVo",b.onclick=lireExtraitVid,c.appendChild(b),this.donnees.extraitCorrection.affichST||(b=document.createElement("div"),b.id="btnVidExtrait_c_"+a+
"_st",b.className="feedback btnExtraitVidSt",b.onclick=lireExtraitVid,c.appendChild(b)));b=document.createElement("span");b.className="feedback qScore";b.id="qScore_"+a;c.appendChild(b);d.appendChild(c);c=document.createElement("div");c.className="feedback autoEval";c.id="ctnAutoEvaluation_"+a;d.appendChild(c);tblExo.scenario.msgAE&&creationAE(a)},corr:function(a){$("#ctnQuestion_"+a+" .feedback").show("fast");var d=0;$("#ctnQuestion_"+a+" input[type='checkbox']").addClass("QCMCocheInactif");for(var c=
0;c<this.donnees.propositions.length;c++){var b=document.getElementById("cb_"+a+"_"+c);b.disabled=!0;b.className=b.checked===this.donnees.propositions[c].reponseCorrecte?"QCMCocheBon":"QCMCocheFaux";b.checked&&this.donnees.scoreActif&&(b=parseInt(this.donnees.propositions[c].score),document.getElementById("score_"+a+"_"+c).innerHTML=b,document.getElementById("score_"+a+"_"+c).style="display:block",d+=b,$("#ctnScore").removeClass("invisible"))}this.donnees.scoreActif&&(document.getElementById("qScore_"+
a).innerHTML=d,tblReponses[pCourante].score[a]=d,majScore())}};function QCMClckHdlr(a){a=a.currentTarget.id.split("_")[1];tblReponses[pCourante].reps[a]="";for(var d=0;d<tblExo.pages[pCourante].questions[a].propositions.length;d++)document.getElementById("cb_"+a+"_"+d).checked?tblReponses[pCourante].reps[a]+="1":tblReponses[pCourante].reps[a]+="0"}
function QCMsCorr(){for(var a=0;a<tblExo.pages[pCourante].questions.length;a++)if("qcm"===tblExo.pages[pCourante].questions[a].type){for(var d=0,c=0;c<tblExo.pages[pCourante].questions[a].propositions.length;c++){var b=document.getElementById("cb_"+a+"_"+c);b.className=b.checked===tblExo.pages[pCourante].questions[a].propositions[c].reponseCorrecte?"QCMCocheBon":"QCMCocheFaux";b.checked&&tblExo.pages[pCourante].questions[a].scoreActif&&(b=parseInt(tblExo.pages[pCourante].questions[a].propositions[c].score),
document.getElementById("score_"+a+"_"+c).innerHTML=b,document.getElementById("score_"+a+"_"+c).style="display:block",d+=b,$("#ctnScore").removeClass("invisible"))}tblExo.pages[pCourante].questions[a].scoreActif&&(console.log("score actif \u00e0 "+pCourante+" - "+a),document.getElementById("qScore_"+a).innerHTML=d,tblReponses[pCourante].score[a]=d,majScore())}$("input[type='checkbox']").attr("disabled","disabled");$("input[type='checkbox']").addClass("QCMCocheInactif")};
